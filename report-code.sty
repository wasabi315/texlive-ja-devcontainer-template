\usepackage{listings}

\renewcommand{\lstlistingname}{Code}

\lstset{ 
  basicstyle=\ttfamily\footnotesize,
  breaklines=true,
  extendedchars=true,
  frame=single,
  keepspaces=true,
  showspaces=false,
}

\lstdefinestyle{code}{
  numbers=left,
  numbersep=10pt,
  commentstyle=\itshape,
  keywordstyle=\bfseries,
}

\lstnewenvironment{code}[1][]{\lstset{style=code, #1}}{}

\newcommand{\includecode}[2][]{\lstinputlisting[caption=#2, style=code, #1]{#2}}
